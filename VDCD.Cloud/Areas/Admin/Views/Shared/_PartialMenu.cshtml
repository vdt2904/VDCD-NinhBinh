<div id="layoutSidenav_nav">
    <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
        <div class="sb-sidenav-menu">
            <div class="nav">
                <a class="nav-link" href="/admin">
                    <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                    Dashboard
                </a>
                <a class="nav-link" href="~/admin/setting/generalsetting">
                    <div class="sb-nav-link-icon"><i class="fa-solid fa-bars"></i></div>
                    Thiết kế hệ thống
                </a>
                <a class="nav-link position-relative" href="~/admin/ContactMessage/index">
                    <div class="sb-nav-link-icon">
                        <i class="fa-solid fa-bars"></i>
                    </div>
                    Quản lý tin nhắn
                </a>

                <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseLayouts" aria-expanded="false" aria-controls="collapseLayouts">
                    <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                    Quản lý dự án
                    <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                </a>
                <div class="collapse" id="collapseLayouts" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                    <nav class="sb-sidenav-menu-nested nav">
                        <a class="nav-link" href="~/Admin/category/index">Danh sách danh mục</a>
                        <a class="nav-link" href="~/admin/projects/index">Danh sách dự án</a>
                        <a class="nav-link" href="~/admin/customer/index">Danh sách khách hàng </a>
                    </nav>
                </div>
                <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePages" aria-expanded="false" aria-controls="collapsePages">
                    <div class="sb-nav-link-icon"><i class="fas fa-book-open"></i></div>
                    Cơ cấu tổ chức
                    <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                </a>
                <div class="collapse" id="collapsePages" aria-labelledby="headingTwo" data-bs-parent="#sidenavAccordion">
                    <nav class="sb-sidenav-menu-nested nav">
                        <a class="nav-link" href="~/admin/center/index">Trung Tâm</a>
                        <a class="nav-link" href="~/admin/User/index">Cán bộ</a>
                        <a class="nav-link" href="~/admin/department/index">Phòng ban</a>
                        <a class="nav-link" href="~/admin/position/index">Chức vụ</a>
                        <a class="nav-link" href="~/admin/jobtitle/index">Chức danh</a>
                    </nav>
                </div>
                <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseCareers" aria-expanded="false" aria-controls="collapseCareers">
                    <div class="sb-nav-link-icon"><i class="fas fa-book-open"></i></div>
                    Careers
                    <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                </a>
                <div class="collapse" id="collapseCareers" aria-labelledby="headingTwo" data-bs-parent="#sidenavAccordion">
                    <nav class="sb-sidenav-menu-nested nav">
                        <a class="nav-link" href="~/admin/JobPosition/index">Job description</a>
                        <a class="nav-link" href="~/admin/JobApplication/index">CURRICULUM VITAE </a>
                    </nav>
                </div>
                <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePosts" aria-expanded="false" aria-controls="collapsePosts">
                    <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                    Quản lý bài viết
                    <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                </a>
                <div class="collapse" id="collapsePosts" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                    <nav class="sb-sidenav-menu-nested nav">
                        <a class="nav-link" href="~/Admin/posts/index">Danh sách bài viết</a>
                        <a class="nav-link" href="~/Admin/Tags/index">Danh sách HasTags</a>
                    </nav>
                </div>
                <a class="nav-link" href="~/admin/seo/index">
                    <div class="sb-nav-link-icon"><i class="fa-solid fa-bars"></i></div>
                    Quản lý SEO
                </a>

            </div>
        </div>
        <div class="sb-sidenav-footer">
            <div class="small">Logged in as:</div>
            VDCD
        </div>
    </nav>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const currentPath = window.location.pathname.toLowerCase();

        document.querySelectorAll('.sb-sidenav a.nav-link').forEach(link => {
            const href = link.getAttribute('href');
            if (!href || href === '#') return;

            // Chuẩn hóa href
            const linkPath = href
                .replace('~', '')
                .split('?')[0]
                .toLowerCase();

            if (currentPath.startsWith(linkPath)) {
                // Active link
                link.classList.add('active');

                // Nếu là menu con → mở menu cha
                const collapse = link.closest('.collapse');
                if (collapse) {
                    collapse.classList.add('show');

                    // active menu cha
                    const parentLink = document.querySelector(
                        `[data-bs-target="#${collapse.id}"]`
                    );
                    if (parentLink) {
                        parentLink.classList.remove('collapsed');
                        parentLink.classList.add('active');
                    }
                }
            }
        });
    });
</script>

